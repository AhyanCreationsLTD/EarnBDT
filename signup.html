<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>EarnBDT - Sign Up</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body,html{width:100%;height:100%;font-family:'Poppins',sans-serif;overflow-x:hidden;}

/* Gradient Background Animation */
body{
  background: linear-gradient(135deg,#87f0ff,#b0eaff,#ffbcaa,#ff7eb3,#ff758c);
  background-size: 1200% 1200%;
  animation: gradientBG 25s ease infinite;
}
@keyframes gradientBG{
  0%{background-position:0% 50%;}
  25%{background-position:50% 50%;}
  50%{background-position:100% 50%;}
  75%{background-position:50% 50%;}
  100%{background-position:0% 50%;}
}

/* Floating Blobs */
.blob{
  position:absolute; border-radius:50%; opacity:0.6;
  animation: floatBlob linear infinite;
}
@keyframes floatBlob{
  0%{transform: translateY(100vh) scale(1);}
  50%{transform: translateY(50vh) scale(1.2);}
  100%{transform: translateY(-20vh) scale(1);}
}

/* Header */
header{text-align:center;padding:40px 20px;color:#fff;text-shadow:2px 2px 10px rgba(0,0,0,0.3);}
header h1{font-size:42px;margin-bottom:10px;}
header p{font-size:16px;}

/* Container & Form */
.container{max-width:400px;margin:20px auto;padding:20px;position:relative;z-index:2;background:rgba(255,255,255,0.95);border-radius:25px;box-shadow:0 8px 25px rgba(0,0,0,0.2);}
input{width:100%;padding:12px 15px;margin:12px 0;border-radius:15px;border:1px solid #ccc;font-size:16px;transition:0.3s;}
input:focus{border-color:#ff758c;box-shadow:0 0 10px #ff758c;outline:none;}
button{width:100%;padding:14px;margin:15px 0;border:none;border-radius:20px;font-size:16px;font-weight:600;cursor:pointer;background: linear-gradient(45deg,#ff758c,#ff7eb3,#ffbcaa);color:#fff;box-shadow:0 5px 15px rgba(0,0,0,0.2);transition:0.3s,transform 0.2s;}
button:hover{transform:scale(1.05);box-shadow:0 8px 25px rgba(0,0,0,0.3);}

/* Sequential animation for inputs/buttons */
@keyframes fadeUp{from{opacity:0;transform:translateY(50px);}to{opacity:1;transform:translateY(0);}}
input,button{opacity:0;animation:fadeUp 0.8s forwards;}
input:nth-child(1){animation-delay:0.5s;}
input:nth-child(2){animation-delay:1s;}
input:nth-child(3){animation-delay:1.5s;}
input:nth-child(4){animation-delay:2s;}
button{animation-delay:2.5s;}

/* Links */
.links{text-align:center;margin-top:10px;}
.links a{text-decoration:none;color:#ff758c;margin:0 10px;font-size:14px;transition:0.3s;}
.links a:hover{color:#ff0;text-shadow:0 0 8px #fff;}

/* Footer */
.footer{text-align:center;margin:15px;color:#fff;font-size:14px;text-shadow:0 0 10px rgba(0,0,0,0.3);}
</style>
</head>
<body>

<header>
<h1>EarnBDT Sign Up</h1>
<p>Create your account and start earning</p>
</header>

<div class="container">
<form id="signupForm">
  <input type="text" id="username" placeholder="Username" required>
  <input type="email" id="email" placeholder="Email" required>
  <input type="password" id="password" placeholder="Password" required>
  <input type="text" id="referCode" placeholder="Refer Code (Optional)">
  <button type="submit">Sign Up</button>
</form>

<div class="links">
  <a href="login.html">Already have an account?</a>
</div>
</div>

<div class="footer">@EarnBDT - Ahyan Creations LTD</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-database.js";
import { getAuth, createUserWithEmailAndPassword, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyDNkACe_Drga8Uzm-mGMKKLvignadR7jN0",
  authDomain: "earnbdtapp.firebaseapp.com",
  projectId: "earnbdtapp",
  storageBucket: "earnbdtapp.firebasestorage.app",
  messagingSenderId: "407276444050",
  appId: "1:407276444050:web:b6ff2e075202716b5e094b",
  databaseURL:"https://earnbdtapp-default-rtdb.asia-southeast1.firebasedatabase.app/"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth();
const db = getDatabase();

// âœ… Auto-login if already signed in
onAuthStateChanged(auth,(user)=>{
  if(user){
    window.location.href='dashboard.html';
  }
});

document.getElementById('signupForm').addEventListener('submit', function(e){
  e.preventDefault();
  const username = document.getElementById('username').value.trim();
  const email = document.getElementById('email').value.trim();
  const password = document.getElementById('password').value.trim();
  const referCode = document.getElementById('referCode').value.trim();

  createUserWithEmailAndPassword(auth,email,password)
  .then((userCredential)=>{
    const uid = userCredential.user.uid;
    let userData = {
      username: username,
      email: email,
      balance: 0,
      points: referCode!==""?10:0, // 10 points if refer code used
      referCodeUsed: referCode
    };

    set(ref(db,'users/'+uid),userData)
    .then(()=>{
      alert('Sign Up Successful!');
      window.location.href='dashboard.html';
    })
    .catch((error)=>{
      alert('Database Error: '+error.message);
    });
  })
  .catch((error)=>{
    alert('Sign Up Error: '+error.message);
  });
});
</script>

<script>
// Floating blobs
function createBlobs(count){
  const colors = ['#ff758c','#ff7eb3','#ffbcaa','#b0eaff','#87f0ff','#ffddaa'];
  for(let i=0;i<count;i++){
    let blob=document.createElement('div');
    blob.className='blob';
    blob.style.width=blob.style.height=(30+Math.random()*70)+'px';
    blob.style.background=colors[Math.floor(Math.random()*colors.length)];
    blob.style.left=Math.random()*100+'%';
    blob.style.top=Math.random()*100+'%';
    blob.style.animationDuration=(15+Math.random()*10)+'s';
    document.body.appendChild(blob);
  }
}
createBlobs(15);
</script>

</body>
</html>
